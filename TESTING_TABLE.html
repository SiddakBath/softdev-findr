<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Findr - Complete Testing Table</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; color: #111; background: #fff; margin: 12px; font-size: 10px; }
    h1 { margin: 0 0 4px 0; font-size: 16px; }
    h2 { margin: 16px 0 4px 0; font-size: 12px; }
    p.meta { color: #555; margin: 0 0 8px 0; font-size: 9px; }
    table { border-collapse: collapse; width: 100%; font-size: 9px; }
    thead th { background: #f3e8ff; border: 1px solid #7c3aed; color: #111; padding: 4px 6px; text-align: left; font-size: 9px; }
    tbody td { border: 1px solid #d6bcfa; padding: 4px 6px; vertical-align: top; font-size: 9px; }
    tbody tr:nth-child(even) { background: #faf5ff; }
    code { background: #f6f6f6; padding: 1px 2px; border-radius: 2px; font-size: 8px; }
    .mod { font-weight: bold; color: #4c1d95; }
    .note { color: #444; font-size: 8px; margin: 6px 0 12px 0; }
    ul { font-size: 9px; margin: 8px 0; }
    li { margin: 2px 0; }
  </style>
</head>
<body>
  <h1>Findr - Complete Testing Table</h1>
  <p class="meta">Covers authentication, report management (CRUD), Firestore integration, dialogs, and UI behaviors based on the current codebase in <code>lib/</code>. Validation tests include existence, format, and range checks where implemented. Unless otherwise noted, the application behaves as expected and modules function correctly.</p>
  <p class="note"><strong>Columns:</strong> What is to be tested | Test data to be used | Expected result | Actual result | Corrections made</p>

  <h2>Authentication & Routing</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="mod">Output for unauthenticated routing</td>
        <td>Sign out and relaunch app</td>
        <td><code>AuthWrapper</code> shows <code>LoginScreen</code>.</td>
        <td>Login screen shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td class="mod">Output for authenticated routing</td>
        <td>Signed-in user session present</td>
        <td><code>AuthWrapper</code> shows <code>HomeScreen</code>.</td>
        <td>Home screen shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Existence check of "Email" user input (login)</td>
        <td>Email: ""; Password: "Password123!"</td>
        <td>Form validator shows "Enter email"; login not attempted.</td>
        <td>Validation error shown; no sign-in call.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Email" user input (login)</td>
        <td>Email: "user@bad"; Password: "Password123!"</td>
        <td>Form validator shows "Enter a valid email address".</td>
        <td>Validation error shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Existence check of "Password" user input (login)</td>
        <td>Email: "valid@example.com"; Password: ""</td>
        <td>Form validator shows "Enter password".</td>
        <td>Validation error shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for invalid password credentials (login)</td>
        <td>Email: "valid@example.com"; Password: "wrongpass"</td>
        <td>Firebase throws <code>wrong-password</code> → UI shows "Wrong password provided.".</td>
        <td>Error banner shows "Wrong password provided.".</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for non-existent user credentials (login)</td>
        <td>Email: "nouser@example.com"; Password: "Any12345"</td>
        <td>Firebase throws <code>user-not-found</code> → UI shows "No user found for that email.".</td>
        <td>Correct message displayed.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td class="mod">Output for valid login data</td>
        <td>Email: existing user; Password: correct</td>
        <td>Loading state shows; auth succeeds; <code>AuthWrapper</code> routes to Home.</td>
        <td>As expected; navigated to Home.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Existence check of "Email" user input (signup)</td>
        <td>Email: ""; Password: "Password123!"; Confirm: "Password123!"</td>
        <td>Form validator shows "Enter email".</td>
        <td>Validation error shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Email" user input (signup)</td>
        <td>Email: "user@bad"; Password: "Password123!"; Confirm: "Password123!"</td>
        <td>Form validator shows "Enter a valid email address".</td>
        <td>Validation error shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Existence check of "Password" user input (signup)</td>
        <td>Email: "new@example.com"; Password: ""; Confirm: ""</td>
        <td>Form validator shows "Enter password" and "Confirm password".</td>
        <td>Validation error shown for both fields.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Match check of "Confirm Password" against "Password" (signup)</td>
        <td>Email: "new@example.com"; Password: "Password123!"; Confirm: "Password456!"</td>
        <td>Error message "Passwords do not match"; no sign-up call.</td>
        <td>Displayed and blocked as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for weak password (signup)</td>
        <td>Email: "weak@example.com"; Password: "123"; Confirm: "123"</td>
        <td>Firebase <code>weak-password</code> → "The password provided is too weak.".</td>
        <td>Message shown as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for email already in use (signup)</td>
        <td>Email: existing user; Password: valid; Confirm: same</td>
        <td>Firebase <code>email-already-in-use</code> → "An account already exists for that email.".</td>
        <td>Message shown as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td class="mod">Output for valid registration data (signup)</td>
        <td>Email: unique; Password: valid; Confirm: same</td>
        <td>Loading state; account created; routed to Home via <code>AuthWrapper</code>.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for logout action</td>
        <td>Tap logout icon on Home</td>
        <td>Signs out and shows <code>LoginScreen</code>.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
    </tbody>
  </table>

  <h2>Home Screen: Search, Filter, List, and Actions</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Output for "Lost" type filter</td>
        <td>Selected type: <code>lost</code>; Dataset contains mixed types</td>
        <td>Only reports with <code>type == 'lost'</code> displayed.</td>
        <td>As expected (client-side filter).</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "Found" type filter</td>
        <td>Selected type: <code>found</code>; Dataset contains mixed types</td>
        <td>Only reports with <code>type == 'found'</code> displayed.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for case-insensitive search over "Title"</td>
        <td>Search: "WALLET"; Title: "Wallet Black Leather"</td>
        <td>Match shown.</td>
        <td>Shown as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for search over "Description"</td>
        <td>Search: "zip compartment"; Description contains phrase</td>
        <td>Match shown.</td>
        <td>Shown as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for search over any "Tag"</td>
        <td>Tags: ["keys", "silver", "gym"]; Search: "gym"</td>
        <td>Match shown.</td>
        <td>Shown as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for no search matches</td>
        <td>Search: improbable string "@@nohits@@"</td>
        <td>Grid renders 0 cards; no errors.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "Latest" sort option</td>
        <td><code>selectedSort = "latest"</code>; dataset with varying <code>createdAt</code></td>
        <td>Cards ordered by <code>createdAt</code> descending (newest first).</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "Oldest" sort option</td>
        <td><code>selectedSort = "oldest"</code>; dataset with varying <code>createdAt</code></td>
        <td>Cards ordered by <code>createdAt</code> ascending (oldest first).</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for real-time stream update</td>
        <td>Add a new report in Firestore while Home is open</td>
        <td>New card appears without manual refresh.</td>
        <td>Appears in grid via <code>StreamBuilder</code>.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for delete action (cancel)</td>
        <td>Tap ⋮ → Delete → choose Cancel</td>
        <td>No deletion; card remains.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for delete action (confirm)</td>
        <td>Tap ⋮ → Delete → confirm</td>
        <td>Firestore <code>delete</code>; card removed; success dialog shown.</td>
        <td>Deleted and dialog shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for resolve action (cancel)</td>
        <td>Tap ⋮ → Mark as resolved → Cancel</td>
        <td>No change to <code>resolved</code>.</td>
        <td>No change, as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for resolve action (confirm)</td>
        <td>Tap ⋮ → Mark as resolved → confirm</td>
        <td>Firestore field <code>resolved = true</code>; success dialog.</td>
        <td>Updated; dialog shown.</td>
        <td>None required</td>
      </tr>
    </tbody>
  </table>

  <h2>Report Form: Creation & Editing (Validation, Existence, Range)</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <!-- Title Field Validation -->
      <tr>
        <td class="mod">Existence check of "Title" user input</td>
        <td>Title: ""; other fields valid</td>
        <td>Validator error "Title is required"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Title" user input</td>
        <td>Title: "Valid Title"; other fields valid</td>
        <td>No error; title accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Title" user input (minimum length)</td>
        <td>Title: "ab"; other fields valid</td>
        <td>Validator error "Title must be at least 3 characters long"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Title" user input (maximum length)</td>
        <td>Title: 101+ characters; other fields valid</td>
        <td>Validator error "Title must be less than 100 characters"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Description Field Validation -->
      <tr>
        <td class="mod">Existence check of "Description" user input</td>
        <td>Description: ""; other fields valid</td>
        <td>Validator error "Description is required"; blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Description" user input</td>
        <td>Description: "Valid description with text"; other fields valid</td>
        <td>No error; description accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Description" user input (minimum length)</td>
        <td>Description: "short"; other fields valid</td>
        <td>Validator error "Description must be at least 10 characters long"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Description" user input (maximum length)</td>
        <td>Description: 501+ characters; other fields valid</td>
        <td>Validator error "Description must be less than 500 characters"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Colour Field Validation -->
      <tr>
        <td class="mod">Existence check of "Colour" user input</td>
        <td>Colour: ""; other fields valid</td>
        <td>Validator error "Color is required"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Colour" user input (invalid hex)</td>
        <td>Colour: "#12AB" (invalid) or "beige" (unsupported)</td>
        <td>Validator error "Enter a valid 6-digit hex code (e.g., #FF0000)"; blocked until fixed or cleared.</td>
        <td>Error shown; field must be cleared or corrected.</td>
        <td>Updated to only accept hex codes</td>
      </tr>
      <tr>
        <td>Type/format check of "Colour" user input (valid hex)</td>
        <td>Colour: "#FF0000"</td>
        <td>No error; color chip reflects red.</td>
        <td>Accepted; chip displays red.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Colour" user input (invalid format)</td>
        <td>Colour: "purple" (color names no longer supported)</td>
        <td>Validator error "Enter a valid 6-digit hex code (e.g., #FF0000)"; submission blocked.</td>
        <td>Error shown; color names no longer accepted.</td>
        <td>Updated to only accept hex codes</td>
      </tr>

      <!-- Tags Field Validation -->
      <tr>
        <td class="mod">Existence check of "Tags" user input</td>
        <td>Tags: ""; other fields valid</td>
        <td>Validator error "At least one tag is required"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Tags" user input (valid format)</td>
        <td>Tags: "wallet, black, leather"; other fields valid</td>
        <td>No error; tags parsed correctly.</td>
        <td>Accepted; parsed as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Tags" user input (invalid characters)</td>
        <td>Tags: "tag@123"; other fields valid</td>
        <td>Validator error "Tags can only contain letters, numbers, and spaces"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Tags" user input (minimum count)</td>
        <td>Tags: "a"; other fields valid</td>
        <td>Validator error "Each tag must be at least 2 characters long"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Tags" user input (maximum count)</td>
        <td>Tags: "tag1,tag2,tag3,tag4,tag5,tag6,tag7,tag8,tag9,tag10,tag11"; other fields valid</td>
        <td>Validator error "Maximum 10 tags allowed"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Tags" user input (individual tag length)</td>
        <td>Tags: "verylongtagnameexceedingtwenty"; other fields valid</td>
        <td>Validator error "Each tag must be less than 20 characters"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Location Field Validation -->
      <tr>
        <td class="mod">Existence check of "Location" user input</td>
        <td>Location: ""; other fields valid</td>
        <td>Validator error "Location is required"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Location" user input</td>
        <td>Location: "Valid Location"; other fields valid</td>
        <td>No error; location accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Location" user input (minimum length)</td>
        <td>Location: "ab"; other fields valid</td>
        <td>Validator error "Location must be at least 3 characters long"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Location" user input (maximum length)</td>
        <td>Location: 101+ characters; other fields valid</td>
        <td>Validator error "Location must be less than 100 characters"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Reporter Name Field Validation -->
      <tr>
        <td class="mod">Existence check of "Reporter Name" user input</td>
        <td>Reporter Name: ""; other fields valid</td>
        <td>Validator error "Reporter name is required"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Reporter Name" user input (valid format)</td>
        <td>Reporter Name: "John Smith"; other fields valid</td>
        <td>No error; name accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Reporter Name" user input (invalid characters)</td>
        <td>Reporter Name: "John123"; other fields valid</td>
        <td>Validator error "Name can only contain letters and spaces"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Reporter Name" user input (minimum length)</td>
        <td>Reporter Name: "a"; other fields valid</td>
        <td>Validator error "Name must be at least 2 characters long"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Reporter Name" user input (maximum length)</td>
        <td>Reporter Name: 51+ characters; other fields valid</td>
        <td>Validator error "Name must be less than 50 characters"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Reporter Email Field Validation -->
      <tr>
        <td class="mod">Existence check of "Reporter Email" user input</td>
        <td>Reporter Email: ""; other fields valid</td>
        <td>Validator error "Email is required"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Reporter Email" user input (valid format)</td>
        <td>Reporter Email: "user@example.com"; other fields valid</td>
        <td>No error; email accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Reporter Email" user input (invalid format)</td>
        <td>Reporter Email: "invalid-email"; other fields valid</td>
        <td>Validator error "Please enter a valid email address"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Reporter Email" user input (maximum length)</td>
        <td>Reporter Email: 101+ characters; other fields valid</td>
        <td>Validator error "Email must be less than 100 characters"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Date and Time Field Validation -->
      <tr>
        <td class="mod">Existence check of "Date and Time" user input</td>
        <td>Date/Time: default values; other fields valid</td>
        <td>No error; current date/time accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Date and Time" user input</td>
        <td>Date/Time: valid date and time selection; other fields valid</td>
        <td>No error; date/time accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Date" user input (upper bound)</td>
        <td>Try to pick tomorrow in DatePicker</td>
        <td>Picker <code>lastDate = today</code>; future date not selectable.</td>
        <td>Disabled as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Date" user input (lower bound)</td>
        <td>Try to pick 2019-12-31</td>
        <td>Picker <code>firstDate = 2020-01-01</code>; not selectable.</td>
        <td>Disabled as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Range check of "Date and Time" (future date/time)</td>
        <td>Set date to today and time to future time</td>
        <td>Error message "Date and time cannot be in the future"; submission blocked.</td>
        <td>Error shown; not submitted.</td>
        <td>None required</td>
      </tr>

      <!-- Type Field Validation -->
      <tr>
        <td class="mod">Existence check of "Type" user input</td>
        <td>Type: default "lost"; other fields valid</td>
        <td>No error; default type accepted.</td>
        <td>Accepted as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Type/format check of "Type" user input</td>
        <td>Type: select "found" from dropdown; other fields valid</td>
        <td>No error; type changed to "found".</td>
        <td>Changed as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td class="mod">Output for valid "Create report" submission</td>
        <td>Title: "Lost Wallet"; Type: "lost"; Description: sample text; Date/Time: now; Colour: "#000000"; Tags: "wallet, black"; Location: "Library"; Reporter Name/Email: sample</td>
        <td>Report saved to Firestore via <code>addReport</code>; success dialog; return to previous screen on OK.</td>
        <td>Saved; dialog displayed; pop on dismiss.</td>
        <td>Updated to use hex color format</td>
      </tr>
      <tr>
        <td class="mod">Output for valid "Edit report" submission</td>
        <td>Open existing → change Title to "Lost Wallet - Updated"</td>
        <td>Report updated via <code>updateReport</code>; success dialog; pop on dismiss.</td>
        <td>Updated and confirmed.</td>
        <td>None required</td>
      </tr>

      <!-- Image Upload Validation -->
      <tr>
        <td class="mod">Image upload functionality (optional field)</td>
        <td>Select image from gallery; all other fields valid</td>
        <td>Image uploaded to Firebase Storage; URL saved in report; image displayed in UI.</td>
        <td>Image uploaded and displayed correctly.</td>
        <td>Implemented Firebase Storage integration</td>
      </tr>
      <tr>
        <td>Image validation - file size limit</td>
        <td>Select image > 5MB; all other fields valid</td>
        <td>Error message "Invalid image. Please select a valid image file (max 5MB)"; submission blocked.</td>
        <td>Error shown; upload prevented.</td>
        <td>Added file size validation</td>
      </tr>
      <tr>
        <td>Image validation - file format</td>
        <td>Select non-image file (e.g., .txt, .pdf); all other fields valid</td>
        <td>Error message for unsupported format; submission blocked.</td>
        <td>Error shown; upload prevented.</td>
        <td>Added format validation (jpg, jpeg, png, gif, bmp, webp)</td>
      </tr>
      <tr>
        <td>Image validation - empty file</td>
        <td>Select 0-byte image file; all other fields valid</td>
        <td>Error message for empty file; submission blocked.</td>
        <td>Error shown; upload prevented.</td>
        <td>Added empty file validation</td>
      </tr>
      <tr>
        <td>Image upload without image (optional)</td>
        <td>Submit report without selecting image; all other fields valid</td>
        <td>Report saved successfully with <code>imageUrl = null</code>.</td>
        <td>Report saved without image.</td>
        <td>Image field is optional</td>
      </tr>
      <tr>
        <td>Image upload progress feedback</td>
        <td>Select large image file; submit report</td>
        <td>Loading dialog shows "Uploading image..." during upload process.</td>
        <td>Loading dialog displayed during upload.</td>
        <td>Added upload progress feedback</td>
      </tr>
      <tr>
        <td>Image upload error handling</td>
        <td>Simulate network error during upload</td>
        <td>Error message displayed; report submission cancelled.</td>
        <td>Error handled appropriately.</td>
        <td>Added comprehensive error handling</td>
      </tr>
      <tr>
        <td>Image removal functionality</td>
        <td>Select image, then tap remove button (X)</td>
        <td>Selected image cleared; upload area shows placeholder again.</td>
        <td>Image removed from selection.</td>
        <td>Added image removal feature</td>
      </tr>
      <tr>
        <td>Image display in report form</td>
        <td>Select image from gallery</td>
        <td>Selected image displayed in upload area with remove button (X).</td>
        <td>Image preview shown correctly.</td>
        <td>Updated report form UI with image preview</td>
      </tr>
      <tr>
        <td>Image upload area UI feedback</td>
        <td>Tap upload area without selecting image</td>
        <td>Image picker opens; user can select from gallery.</td>
        <td>Image picker opens correctly.</td>
        <td>Image picker integration works</td>
      </tr>
      <tr>
        <td>Image selection feedback</td>
        <td>Select image from gallery</td>
        <td>Filename shown below upload area with green text.</td>
        <td>Selection feedback displayed correctly.</td>
        <td>Added filename display feature</td>
      </tr>
    </tbody>
  </table>

  <h2>Report Detail Screen</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Visibility check of "Owner actions"</td>
        <td>Current user email equals <code>report.reporterEmail</code></td>
        <td>App bar shows Delete and Edit icons; action button text = "Resolve".</td>
        <td>Controls visible; Resolve shown.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Visibility check of "Non-owner actions"</td>
        <td>Current user email NOT equal to <code>report.reporterEmail</code></td>
        <td>No owner icons; action button text = "Show Contact".</td>
        <td>As expected.</td>
        <td>Updated button text from "Contact" to "Show Contact"</td>
      </tr>
      <tr>
        <td>Output for missing image (placeholder)</td>
        <td><code>imageUrl = null</code> or empty</td>
        <td>Grey placeholder with icon is shown.</td>
        <td>Placeholder displayed.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Rendering check of "Colour" from hex</td>
        <td><code>colour = "#FF0000"</code></td>
        <td>Red swatch and text "#FF0000".</td>
        <td>Rendered correctly.</td>
        <td>None required</td>
      </tr>

      <tr>
        <td>Formatting check of "Date" and "Time" values</td>
        <td><code>timeFoundLost = 2025-08-05T14:35:00</code></td>
        <td>Date: <code>dd/MM/yyyy</code>; Time: <code>HH:mm</code>.</td>
        <td>Displayed as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for delete from detail (cancel)</td>
        <td>Tap Delete → Cancel</td>
        <td>No deletion.</td>
        <td>No change.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for delete from detail (confirm)</td>
        <td>Tap Delete → Confirm</td>
        <td>Firestore document removed; success dialog; pop to previous screen.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for resolve (owner, confirm)</td>
        <td>Tap Resolve → Confirm</td>
        <td>Firestore <code>resolved = true</code>; success dialog shown.</td>
        <td>Updated and confirmed.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for contact (non-owner, confirm)</td>
        <td>Tap "Show Contact" button</td>
        <td>Dialog shows "Contact Information" with reporter's email address displayed in a styled container.</td>
        <td>Email displayed in dialog as expected.</td>
        <td>Updated to show email instead of sending contact request</td>
      </tr>
      <tr>
        <td>Image display in report detail screen</td>
        <td>Report with <code>imageUrl</code> set</td>
        <td>Large image displayed in detail view with proper sizing.</td>
        <td>Image displayed correctly in detail view.</td>
        <td>ReportDetailScreen already supported image display</td>
      </tr>
      <tr>
        <td>Image placeholder for missing images (detail)</td>
        <td>Report with <code>imageUrl = null</code></td>
        <td>Placeholder icon displayed instead of image.</td>
        <td>Placeholder shown correctly.</td>
        <td>Existing placeholder functionality works</td>
      </tr>
    </tbody>
  </table>

  <h2>Image Upload & Storage</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="mod">Firebase Storage upload functionality</td>
        <td>Select valid image file; submit report</td>
        <td>Image uploaded to <code>report_images/{uuid}.jpg</code>; download URL returned.</td>
        <td>Image uploaded successfully to Firebase Storage.</td>
        <td>Implemented StorageService with Firebase Storage integration</td>
      </tr>
      <tr>
        <td>Image URL storage in Firestore</td>
        <td>Report with uploaded image</td>
        <td>Download URL saved in <code>image</code> field in Firestore document.</td>
        <td>URL stored correctly in database.</td>
        <td>Updated Report model and Firestore service</td>
      </tr>
      <tr>
        <td>Image metadata storage</td>
        <td>Upload image with metadata</td>
        <td>Content type, upload timestamp, and original filename stored in Firebase Storage metadata.</td>
        <td>Metadata stored correctly.</td>
        <td>Added SettableMetadata to upload process</td>
      </tr>
      <tr>
        <td>Unique filename generation</td>
        <td>Upload multiple images</td>
        <td>Each image gets unique UUID-based filename to prevent conflicts.</td>
        <td>Unique filenames generated correctly.</td>
        <td>Implemented UUID-based filename generation</td>
      </tr>
      <tr>
        <td>Image upload error handling - permission denied</td>
        <td>Simulate Firebase Storage permission error</td>
        <td>Error message "Permission denied. Please check your authentication status."</td>
        <td>Appropriate error message displayed.</td>
        <td>Added specific error handling for permission issues</td>
      </tr>
      <tr>
        <td>Image upload error handling - unauthorized</td>
        <td>Simulate unauthorized access error</td>
        <td>Error message "Unauthorized access to storage. Please log in again."</td>
        <td>Appropriate error message displayed.</td>
        <td>Added specific error handling for authentication issues</td>
      </tr>
      <tr>
        <td>Image upload error handling - network failure</td>
        <td>Simulate network connectivity issues</td>
        <td>Generic error message "Failed to upload image: [error details]"</td>
        <td>Error message displayed with details.</td>
        <td>Added comprehensive error handling</td>
      </tr>
    </tbody>
  </table>



  <h2>Report Card Widget</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Visibility check of "Owner menu"</td>
        <td>Owner view; callbacks provided</td>
        <td>⋮ menu visible with Resolve (if not resolved), Edit, Delete.</td>
        <td>Visible and functional.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Visibility check of "Non-owner menu"</td>
        <td>Non-owner view</td>
        <td>No ⋮ menu displayed.</td>
        <td>Hidden as expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Visibility of "Resolve" menu when already resolved</td>
        <td>Owner view; <code>report.resolved = true</code></td>
        <td>"Resolve" option is not present in the ⋮ menu.</td>
        <td>Hidden as expected.</td>
        <td>None required</td>
      </tr>

      <tr>
        <td>Truncation check of "Description" display</td>
        <td>Long description (> 2 lines)</td>
        <td>Truncated to 2 lines with ellipsis.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Limit check of "Tags" on card</td>
        <td>Tags: 5+ items</td>
        <td>Only first 3 tags shown on card.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Mapping check of background color from "colour" value</td>
        <td><code>colour = "#00FF00"</code> (hex)</td>
        <td>Hex code parsed and applied as background color.</td>
        <td>Green color applied correctly.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Image display in report cards</td>
        <td>Report with <code>imageUrl</code> set</td>
        <td>Image displayed in card with proper aspect ratio and fit.</td>
        <td>Image displayed correctly in cards.</td>
        <td>ReportCard already supported image display</td>
      </tr>
      <tr>
        <td>Image placeholder for missing images (cards)</td>
        <td>Report with <code>imageUrl = null</code></td>
        <td>Placeholder icon displayed instead of image.</td>
        <td>Placeholder shown correctly.</td>
        <td>Existing placeholder functionality works</td>
      </tr>
      <tr>
        <td>Image error handling - broken URL (cards)</td>
        <td>Report with invalid <code>imageUrl</code></td>
        <td>Error builder shows placeholder instead of broken image.</td>
        <td>Error handling works correctly.</td>
        <td>Existing error handling works</td>
      </tr>
    </tbody>
  </table>

  <h2>Firestore Service</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Output for "getReports" (unfiltered stream)</td>
        <td><code>typeFilter = null</code></td>
        <td>All documents streamed and mapped to <code>Report</code>.</td>
        <td>Stream emits list; UI updates.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "getReports" (filtered by type)</td>
        <td><code>typeFilter = 'lost'</code></td>
        <td>Only <code>type == 'lost'</code> documents streamed.</td>
        <td>Filtered stream works (when passed).</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "addReport"</td>
        <td>Valid <code>Report</code> instance with unique <code>id</code></td>
        <td>Document created at <code>reports/{id}</code>.</td>
        <td>Created successfully.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "updateReport"</td>
        <td>Modify <code>description</code> and <code>tags</code></td>
        <td>Document updated; stream reflects changes.</td>
        <td>Updated successfully.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "deleteReport"</td>
        <td>Existing <code>id</code></td>
        <td>Document deleted; stream removes it.</td>
        <td>Deleted successfully.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for "markResolved"</td>
        <td>Existing <code>id</code></td>
        <td>Field <code>resolved</code> set to <code>true</code>.</td>
        <td>Updated successfully.</td>
        <td>None required</td>
      </tr>
    </tbody>
  </table>

  <h2>Dialogs</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Output for confirmation dialog (confirm)</td>
        <td>Invoke with title "Delete Report" and confirm</td>
        <td>Returns <code>true</code>; onConfirm callback called.</td>
        <td>Returned <code>true</code>; callback executed.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for confirmation dialog (cancel)</td>
        <td>Invoke and cancel</td>
        <td>Returns <code>false</code>; onCancel called.</td>
        <td>Returned <code>false</code>; callback executed.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Output for success dialog</td>
        <td>Invoke with title "Success!"</td>
        <td>Modal shown, closes on OK; onDismiss called.</td>
        <td>As expected.</td>
        <td>None required</td>
      </tr>
    </tbody>
  </table>

  <h2>Model Mapping</h2>
  <table>
    <thead>
      <tr>
        <th>What is to be tested</th>
        <th>Test data to be used</th>
        <th>Expected result</th>
        <th>Actual result</th>
        <th>Corrections made</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Serialization check of "Report.toMap"</td>
        <td>Report with dates and optional <code>imageUrl = null</code></td>
        <td>Dates in ISO 8601; <code>image</code> key set to <code>null</code>.</td>
        <td>Map matches expectations.</td>
        <td>None required</td>
      </tr>
      <tr>
        <td>Parsing check of "Report.fromMap"</td>
        <td>Map with string dates and list tags</td>
        <td>Fields mapped; dates parsed with <code>DateTime.parse</code>; tags as <code>List&lt;String&gt;</code>.</td>
        <td>Parsed as expected.</td>
        <td>None required</td>
      </tr>
    </tbody>
  </table>

  <h2>Notes</h2>
  <ul>
    <li><strong>Required Fields:</strong> All fields are now required except for the image field. This includes: Title, Description, Colour, Tags, Location, Reporter Name, and Reporter Email.</li>
    <li>Colour validation: field is required and must be a 6-digit hex code (<code>#RRGGBB</code>) format only. Color names are no longer supported.</li>
    <li>Title validation: 3-100 characters required.</li>
    <li>Description validation: 10-500 characters required.</li>
    <li>Tags validation: At least one tag required, maximum 10 tags, each 2-20 characters, only letters/numbers/spaces allowed.</li>
    <li>Location validation: 3-100 characters required.</li>
    <li>Reporter Name validation: 2-50 characters required, only letters and spaces allowed.</li>
    <li>Reporter Email validation: Valid email format required, maximum 100 characters.</li>
    <li>Date picker enforces range [2020-01-01, today]; time validation prevents future date/time combinations.</li>
    <li>Search and type filtering on Home are applied client-side on the streamed result set.</li>
    <li><strong>Image Upload:</strong> Optional field with comprehensive validation. Supported formats: JPG, JPEG, PNG, GIF, BMP, WEBP. Maximum file size: 5MB. Images are uploaded to Firebase Storage with unique UUID-based filenames and metadata.</li>
    <li>Image validation includes file size, format, and existence checks. Empty files are rejected. No existence check is performed since the field is optional.</li>
    <li>Image upload provides progress feedback and comprehensive error handling for network issues, permission problems, and authentication errors.</li>
    <li>Images are displayed in report cards, detail screens, and form preview with proper error handling for broken URLs.</li>
    <li>All tested modules function correctly per the current codebase; image upload functionality has been successfully implemented.</li>
  </ul>
</body>
</html> 